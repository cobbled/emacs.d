require-package function
- If package already installed, then skip.
- If package name in package-archive-contents or no-refresh is t,
  then install the package.
- If package name not in package-archive-contents and no-refresh is nil,
  then refresh package contents and call require-package again
  with no-refresh.

#+BEGIN_SRC emacs-lisp
  (defun require-package (package &optional min-version no-refresh)
    (if (package-installed-p package min-version)
        t
      (if (or (assoc package package-archive-contents) no-refresh)
          (package-install package)
        (progn
          (package-refresh-contents)
          (require-package package min-version t)))))
#+END_SRC
